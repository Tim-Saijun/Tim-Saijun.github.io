{"title":"HSV调试工具","uid":"ae72f4d2dd275bb9509251bbb9c54603","slug":"HSV调试工具","date":"2023-01-17T13:57:48.000Z","updated":"2024-02-22T03:52:13.945Z","comments":true,"path":"api/articles/HSV调试工具.json","keywords":"计算机技术,大数据,人工智能","cover":[],"content":"<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Opencv经常会读取hsv颜色空间的图片，在图片上使用颜色提取器往往不能得到准确结果；如果图像中有多个颜色的不同目标，颜色提取工作也是很麻烦的。</p></blockquote>\n<p>此工具可以导入一张图片，通过6个进度条的拖动操作来实现HSV三个值的上下限设定，并将结果实时显示到mask和result层，从而缓解上述问题。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/CenterWander/tuchuang/img/20230117221110.png\" alt=\"图形界面\"></p>\n<p>仅需拖动进度条，即可快速定位多个目标的HSV范围，甚至可以精确到某一个值。<br>代码如下：</p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\" onclick=\"copyCode(this)\"></button><span class=\"lang\">python</span><pre class=\"shiki dracula\" style=\"background-color: #282A36\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FF79C6\">import</span><span style=\"color: #F8F8F2\"> cv2  </span></span>\n<span class=\"line\"><span style=\"color: #FF79C6\">import</span><span style=\"color: #F8F8F2\"> numpy </span><span style=\"color: #FF79C6\">as</span><span style=\"color: #F8F8F2\"> np  </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">path </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #FF79C6\">r</span><span style=\"color: #FF5555\">&#39;</span><span style=\"color: #F1FA8C\">D:</span><span style=\"color: #FF79C6\">\\P</span><span style=\"color: #F1FA8C\">layGround</span><span style=\"color: #FF79C6\">\\C</span><span style=\"color: #F1FA8C\">VP</span><span style=\"color: #FF79C6\">\\r</span><span style=\"color: #F1FA8C\">eturn</span><span style=\"color: #8BE9FD; font-style: italic\">.</span><span style=\"color: #F1FA8C\">png</span><span style=\"color: #FF5555\">&#39;</span><span style=\"color: #F8F8F2\">  </span><span style=\"color: #6272A4\">#图像的位置，使用时仅需修改这一属性</span></span>\n<span class=\"line\"><span style=\"color: #6272A4\"># 滑动条的回调函数，获取滑动条位置处的值  </span></span>\n<span class=\"line\"><span style=\"color: #FF79C6\">def</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #50FA7B\">empty</span><span style=\"color: #F8F8F2\">(</span><span style=\"color: #FFB86C; font-style: italic\">a</span><span style=\"color: #F8F8F2\">):  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    h_min </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> cv2.getTrackbarPos(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Hue Min</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    h_max </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> cv2.getTrackbarPos(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Hue Max</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    s_min </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> cv2.getTrackbarPos(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Sat Min</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    s_max </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> cv2.getTrackbarPos(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Sat Max</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    v_min </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> cv2.getTrackbarPos(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Val Min</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    v_max </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> cv2.getTrackbarPos(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Val Max</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    </span><span style=\"color: #8BE9FD\">print</span><span style=\"color: #F8F8F2\">(h_min, h_max, s_min, s_max, v_min, v_max)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    </span><span style=\"color: #FF79C6\">return</span><span style=\"color: #F8F8F2\"> h_min, h_max, s_min, s_max, v_min, v_max  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    </span></span>\n<span class=\"line\"><span style=\"color: #6272A4\"># 创建一个窗口，放置6个滑动条  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">cv2.namedWindow(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">cv2.resizeWindow(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">640</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">240</span><span style=\"color: #F8F8F2\">)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">cv2.createTrackbar(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Hue Min</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">0</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">179</span><span style=\"color: #F8F8F2\">, empty)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">cv2.createTrackbar(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Hue Max</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">19</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">179</span><span style=\"color: #F8F8F2\">, empty)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">cv2.createTrackbar(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Sat Min</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">110</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">255</span><span style=\"color: #F8F8F2\">, empty)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">cv2.createTrackbar(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Sat Max</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">240</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">255</span><span style=\"color: #F8F8F2\">, empty)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">cv2.createTrackbar(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Val Min</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">153</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">255</span><span style=\"color: #F8F8F2\">, empty)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">cv2.createTrackbar(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Val Max</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">TrackBars</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">255</span><span style=\"color: #F8F8F2\">, </span><span style=\"color: #BD93F9\">255</span><span style=\"color: #F8F8F2\">, empty)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">  </span></span>\n<span class=\"line\"><span style=\"color: #FF79C6\">while</span><span style=\"color: #F8F8F2\"> </span><span style=\"color: #BD93F9\">True</span><span style=\"color: #F8F8F2\">:  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    img </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> cv2.imread(path)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    imgHSV </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> cv2.cvtColor(img, cv2.</span><span style=\"color: #BD93F9\">COLOR_BGR2HSV</span><span style=\"color: #F8F8F2\">)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    </span><span style=\"color: #6272A4\"># 调用回调函数，获取滑动条的值  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    h_min, h_max, s_min, s_max, v_min, v_max </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> empty(</span><span style=\"color: #BD93F9\">0</span><span style=\"color: #F8F8F2\">)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    lower </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> np.array([h_min, s_min, v_min])  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    upper </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> np.array([h_max, s_max, v_max])  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    </span><span style=\"color: #6272A4\"># 获得指定颜色范围内的掩码  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    mask </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> cv2.inRange(imgHSV, lower, upper)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    </span><span style=\"color: #6272A4\"># 对原图图像进行按位与的操作，掩码区域保留  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    imgResult </span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\"> cv2.bitwise_and(img, img, </span><span style=\"color: #FFB86C; font-style: italic\">mask</span><span style=\"color: #FF79C6\">=</span><span style=\"color: #F8F8F2\">mask)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    cv2.imshow(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Mask</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, mask)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    cv2.imshow(</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F1FA8C\">Result</span><span style=\"color: #E9F284\">&quot;</span><span style=\"color: #F8F8F2\">, imgResult)  </span></span>\n<span class=\"line\"><span style=\"color: #F8F8F2\">    cv2.waitKey(</span><span style=\"color: #BD93F9\">1</span><span style=\"color: #F8F8F2\">)</span></span></code></pre></div><p>[[|代码工具]]</p>\n","text":" Opencv经常会读取hsv颜色空间的图片，在图片上使用颜色提取器往往不能得到准确结果；如果图像中有多个颜色的不同目标，颜色提取工作也是很麻烦的。 此工具可以...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"OpenCV","slug":"OpenCV","count":2,"path":"api/categories/OpenCV.json"}],"tags":[{"name":"代码工具","slug":"代码工具","count":2,"path":"api/tags/代码工具.json"}],"toc":"","author":{"name":"以太工坊","slug":"blog-author","avatar":"/img/logo.png","link":"/","description":"分享我的课程学习笔记、经验与有趣的小玩意.图片等资源无法加载时请使用代理","socials":{"github":"https://github.com/Tim-Saijun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"telegram":{"icon":"/img/telegram.svg","link":"https://t.me/tim_run"},"Email":{"icon":"/img/mail.svg","link":"mailto:b@zair.top"},"RSS":{"icon":"/img/rss.svg","link":"/atom.xml"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"模型的评估","uid":"add90185e378e36c94b8bd3e088f97e0","slug":"模型的评估","date":"2023-01-19T13:01:49.000Z","updated":"2024-02-22T03:52:13.965Z","comments":true,"path":"api/articles/模型的评估.json","keywords":"计算机技术,大数据,人工智能","cover":null,"text":" 15e2225780c20263b1094cf2e8d24d28d35d79bf5de03e3538e026674832bddd4c4967768221cf5...","link":"","photos":[],"count_time":{"symbolsCount":"5.8k","symbolsTime":"5 mins."},"categories":[{"name":"机器学习","slug":"机器学习","count":5,"path":"api/categories/机器学习.json"}],"tags":[{"name":"学习笔记","slug":"学习笔记","count":17,"path":"api/tags/学习笔记.json"},{"name":"加密","slug":"加密","count":1,"path":"api/tags/加密.json"}],"author":{"name":"以太工坊","slug":"blog-author","avatar":"/img/logo.png","link":"/","description":"分享我的课程学习笔记、经验与有趣的小玩意.图片等资源无法加载时请使用代理","socials":{"github":"https://github.com/Tim-Saijun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"telegram":{"icon":"/img/telegram.svg","link":"https://t.me/tim_run"},"Email":{"icon":"/img/mail.svg","link":"mailto:b@zair.top"},"RSS":{"icon":"/img/rss.svg","link":"/atom.xml"}}}}},"next_post":{"title":"Latex公式语法","uid":"5c593acf87382cf1567db5936b71aafe","slug":"Latex公式语法","date":"2023-01-14T13:13:52.000Z","updated":"2024-02-22T03:52:13.945Z","comments":true,"path":"api/articles/Latex公式语法.json","keywords":"计算机技术,大数据,人工智能","cover":[],"text":" 用来练习Latex语法，同时测试katex引擎的渲染结果 希腊字母与分行公式 bye. 矩阵在matrix加前缀b v p m，对应方括号 竖线 圆括号；不加...","link":"","photos":[],"count_time":{"symbolsCount":315,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"学习笔记","slug":"学习笔记","count":17,"path":"api/tags/学习笔记.json"}],"author":{"name":"以太工坊","slug":"blog-author","avatar":"/img/logo.png","link":"/","description":"分享我的课程学习笔记、经验与有趣的小玩意.图片等资源无法加载时请使用代理","socials":{"github":"https://github.com/Tim-Saijun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"telegram":{"icon":"/img/telegram.svg","link":"https://t.me/tim_run"},"Email":{"icon":"/img/mail.svg","link":"mailto:b@zair.top"},"RSS":{"icon":"/img/rss.svg","link":"/atom.xml"}}}}}}